<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scratch Global Citizenship Teacher</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Base Styles */
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap');
    * { box-sizing: border-box; font-family: 'Quicksand', 'Trebuchet MS', sans-serif; }
    html, body { width: 100%; height: 100%; margin: 0; padding: 0; }
    body { background: #E8F5E9; }
    #main-wrapper { width: 100%; height: 100%; overflow-y: auto; overflow-x: hidden; }

    /* Stage Cards */
    .stage-card { border-radius: 24px; padding: 28px; margin-bottom: 24px; border: 5px solid; position: relative; cursor: pointer; transition: all 0.3s ease; }
    .stage-card:hover { transform: translateY(-8px) scale(1.02); box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
    .stage-card.completed { border-width: 6px; box-shadow: 0 8px 24px rgba(0,0,0,0.15); }
    .lock-symbol { font-size: 56px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10; }
    .badge-tag { display: inline-block; padding: 10px 20px; border-radius: 24px; font-weight: 700; font-size: 15px; margin: 6px; box-shadow: 0 3px 8px rgba(0,0,0,0.15); }

    /* Buttons */
    .action-btn { padding: 18px 36px; border-radius: 20px; font-weight: 700; font-size: 18px; border: none; cursor: pointer; transition: all 0.3s ease; margin-top: 16px; }
    .action-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .progress-container { width: 100%; height: 16px; border-radius: 24px; overflow: hidden; margin: 24px 0; box-shadow: inset 0 2px 8px rgba(0,0,0,0.15); }
    .progress-bar { height: 100%; transition: width 0.6s; border-radius: 24px; background: #FF5722; }

    .practice-zone { border-radius: 20px; padding: 32px; margin: 28px 0; border: 5px solid #FF5722; background: rgba(255,255,255,0.6); }
    .sprite-option, .backdrop-choice, .code-brick { cursor: pointer; margin: 10px; display: inline-flex; align-items: center; justify-content: center; font-size: 40px; border-radius: 16px; padding: 20px; transition: all 0.3s ease; border: 4px solid transparent; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
    .sprite-option.selected, .backdrop-choice.selected { border-color: #FFD700; box-shadow: 0 0 24px rgba(255,215,0,0.7); }

    .drop-area { min-height: 80px; border: 4px dashed #FF5722; border-radius: 16px; padding: 20px; margin: 16px 0; background: rgba(255,255,255,0.5); }
    .drop-area.drag-over { background: rgba(120,220,180,0.3); border-style: solid; }
  </style>
</head>
<body class="h-full">
  <div id="main-wrapper">
    <!-- Header -->
    <div class="py-8 px-6 text-center">
      <h1 class="text-5xl font-bold mb-4">üåç Scratch Global Citizenship Stories</h1>
      <p class="text-2xl mb-3">Learn Scratch while becoming a global citizen!</p>
      <p class="text-xl font-semibold">Your Scratch Teacher</p>
    </div>

    <!-- Progress -->
    <div class="max-w-6xl mx-auto px-6 mb-8">
      <div class="progress-container"><div class="progress-bar" id="progress-fill" style="width: 0%;"></div></div>
      <p class="text-center font-bold text-xl" id="progress-label">0 of 13 Stages Complete</p>
    </div>

    <!-- Stage Grid -->
    <div id="stage-grid-view" class="max-w-7xl mx-auto px-6 pb-16">
      <h2 class="text-4xl font-bold text-center mb-8">Choose Your Learning Stage</h2>
      <div id="stages-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
    </div>

    <!-- Individual Stage -->
    <div id="individual-stage-view" class="hidden max-w-6xl mx-auto px-6 pb-16">
      <div class="flex justify-between items-center mb-8 gap-6 flex-wrap">
        <button class="action-btn" onclick="returnToGrid()">‚Üê Back to Stages</button>
        <div class="flex gap-4 flex-wrap">
          <button id="prev-btn-top" class="action-btn" onclick="navigatePrevious()" style="display:none;">‚Üê Previous</button>
          <button id="next-btn-top" class="action-btn" onclick="navigateNext()" style="display:none;">Next ‚Üí</button>
        </div>
      </div>
      <div id="stage-details"></div>
      <div class="flex justify-between items-center mt-8 gap-6 flex-wrap">
        <button class="action-btn" onclick="returnToGrid()">‚Üê Back to Stages</button>
        <div class="flex gap-4 flex-wrap">
          <button id="prev-btn-bottom" class="action-btn" onclick="navigatePrevious()" style="display:none;">‚Üê Previous</button>
          <button id="next-btn-bottom" class="action-btn" onclick="navigateNext()" style="display:none;">Next ‚Üí</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const stages = [
      { num:1, title:"üåü Welcome & Mission", task:"Learn digital stories & global citizenship!" },
      { num:2, title:"üë• Choose Characters", task:"Pick TWO sprites for your story!" },
      { num:3, title:"üèûÔ∏è Set the Scene", task:"Choose a backdrop for your story!" },
      { num:4, title:"üö© Start the Story", task:"Add the green flag event block!" },
      { num:5, title:"üèÉ Make It Move", task:"Add motion block to move sprite!" },
      { num:6, title:"üí¨ Make It Talk", task:"Add a say block with a message!" },
      { num:7, title:"‚è∞ Add Timing", task:"Use a wait block for timing!" },
      { num:8, title:"üôã Ask a Question", task:"Make your character ask a question!" },
      { num:9, title:"üì£ Share Your Message", task:"Choose a global value to share!" },
      { num:10, title:"‚ú® End the Story", task:"Add a positive final message!" },
      { num:11, title:"ü§î Reflection", task:"Think about what you learned!" },
      { num:12, title:"üéä Celebration", task:"Celebrate your achievement!" },
      { num:13, title:"üöÄ Ready for Scratch", task:"Create your story in Scratch!" }
    ];

    let activeStage = 0;
    let completedStages = [];

    function displayStageGrid() {
      const container = document.getElementById('stages-container');
      container.innerHTML = stages.map(stage=>{
        const completed = completedStages.includes(stage.num);
        return `<div class="stage-card ${completed?'completed':''}" onclick="loadStage(${stage.num})">
          ${completed?'<div style="position:absolute;top:12px;right:12px;font-size:36px;">‚úÖ</div>':''}
          <div class="badge-tag" style="background:#FF5722;color:white;">STAGE ${stage.num}</div>
          <h3 style="margin:20px 0;">${stage.title}</h3>
          <p>${stage.task}</p>
        </div>`;
      }).join('');
    }

    function loadStage(num){
      activeStage=num;
      document.getElementById('stage-grid-view').classList.add('hidden');
      document.getElementById('individual-stage-view').classList.remove('hidden');
      displayStageContent();
      updateNavButtons();
    }

    function returnToGrid(){
      activeStage=0;
      document.getElementById('individual-stage-view').classList.add('hidden');
      document.getElementById('stage-grid-view').classList.remove('hidden');
    }

    function navigatePrevious(){ if(activeStage>1) loadStage(activeStage-1); }
    function navigateNext(){ if(activeStage<stages.length) loadStage(activeStage+1); }

    function updateNavButtons(){
      document.getElementById('prev-btn-top').style.display = activeStage>1?'block':'none';
      document.getElementById('prev-btn-bottom').style.display = activeStage>1?'block':'none';
      document.getElementById('next-btn-top').style.display = activeStage<stages.length?'block':'none';
      document.getElementById('next-btn-bottom').style.display = activeStage<stages.length?'block':'none';
    }

    function displayStageContent(){
      const stage = stages[activeStage-1];
      document.getElementById('stage-details').innerHTML = `
        <div class="practice-zone">
          <h2>${stage.title}</h2>
          <p>${stage.task}</p>
          <button class="action-btn" onclick="markCompleted(${stage.num})">Mark Stage Complete</button>
        </div>
      `;
    }

    function markCompleted(num){
      if(!completedStages.includes(num)) completedStages.push(num);
      displayStageGrid();
      returnToGrid();
      updateProgress();
    }

    function updateProgress(){
      const percent = (completedStages.length/stages.length)*100;
      document.getElementById('progress-fill').style.width = percent+'%';
      document.getElementById('progress-label').textContent = `${completedStages.length} of ${stages.length} Stages Complete`;
    }

    // Initialize
    displayStageGrid();
    updateProgress();
  </script>
</body>
</html>
